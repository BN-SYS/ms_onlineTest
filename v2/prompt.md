추가 요구사항 회의가 있었어. 
회의 내용 정리해줘. 


## 핵심 내용

### 1. 사용자 타입 및 결제 구조 구체화

**요구사항**
-  **비회원도 테스트 응시 가능** (회원/비회원 모두 무료 응시)
-  **결과 확인 시점에 결제 필요** (응시는 무료, 결과는 유료)
-  **2단계 결제 옵션**:
  1. **기본 결과** (저렴한 가격): IQ 점수 + 백분위(상위 X%) + 발급번호 + 진위확인 코드
  2. **상세 리포트** (추가 결제): 기본 결과 + 표준편차 그래프 + 단계별 분석 + 개선 방향
-  **차액 결제 가능**: 기본 결과 구매 후 차액만 내고 상세 리포트 업그레이드 가능

**개인정보 입력 시점**
- 테스트 시작 전 (동의 및 정보 입력 먼저)
- 입력 항목: 이름, 출생연도, 이메일
- 회원: 로그인 상태면 아이디 매핑으로 자동 입력

---

### 2. 테스트 구조 재설계

**기존 (v1)**
- 1단계: 15문제
- 2단계: 5문제  
- 3단계: 5문제

**변경 요구사항**
1단계 (15문제, 30분 제한) ↓ 검증 (정답률 20% 이상 + 평균 응답시간 30초 이상) ↓ 실패 시: "비정상적인 응시 패턴" 메시지 → 처음부터 재시작 ↓ 2단계 (5문제, 시간 제한 없음) ↓ 검증 동일 ↓ 3단계 (5문제, 시간 제한 없음) ↓ 결제 선택 (기본 결과 / 상세 리포트)


**단계별 특징**
- **1단계**: 레이븐스 매트릭스 (도형 패턴 인식) - IQ 측정
- **2단계**: 수리 연산 능력
- **3단계**: 기억력 또는 상식 (웩슬러 검사 요소)
- 각 단계는 **독립적인 문제 은행(pool)** 보유
- 예: 1단계 문제 은행 100개 → 랜덤 15개 출제

---

### 3. 문제 출제 및 관리 시스템

**요구사항**
-  관리자가 문제은행에 문제 등록 (N개, 예: 1단계 100개)
-  각 문제마다:
  - 문제 이미지 업로드
  - 보기 개수 설정 (4~8개, 유동적)
  - 정답 선택
  - 보기 이미지 업로드
-  **보기만 랜덤 노출** (문제 순서는 랜덤 아님)
-  보기 개수가 8개 미만이면 해당 개수만큼만 표시

**예시**
[1단계 문제 은행: 100문제]

문제 #1: 이미지 (도형1.jpg), 보기 4개, 정답 3번
문제 #2: 이미지 (도형2.jpg), 보기 5개, 정답 2번 ... → 사용자 A: 문제 #12, #45, #78... (랜덤 15개 선택) → 사용자 B: 문제 #3, #67, #89... (다른 15개)

---

### 4. 점수 산출 및 연령 보정 

**기존 (v1)**
- 정답률 기반 단순 계산

**변경 요구사항**
-  **연령 보정 추가**:
  - 20대: 보정 없음
  - 30대: +1점
  - 40대: +2점
  - 50대: +3점
  - 60대 이상: +4점
  - (근거: 연령 증가 시 인지 능력 자연 감소 보정)

**점수 산출 공식**
```javascript
기본 IQ = 정답률 기반 계산 (기존 로직)
최종 IQ = 기본 IQ + 연령 보정값

예시:
- 25세, 정답률 80% → IQ 118 + 0 = 118
- 35세, 정답률 80% → IQ 118 + 1 = 119
- 45세, 정답률 80% → IQ 118 + 2 = 120
5. 결과 출력 및 인증 
기본 결과 포함 항목

IQ 점수 (큰 폰트)
백분위 (상위 X%)
발급번호 (예: MENSA-2026-123456)
진위확인 코드 (예: A3F2-8D1C, 8자리 해시)
이름, 출생연도
상세 리포트 추가 항목

표준편차 그래프 4개:
종합 IQ
1단계 (패턴 인식)
2단계 (수리 능력)
3단계 (기억력/상식)
단계별 점수 및 백분위
개선 방향 제시 (점수대별 멘트 5~10가지)
PDF 다운로드 버튼


6. 응시 로그 및 관리자 조회
요구사항

 모든 응시 기록을 DB에 저장 (로그 누적)
 한 사용자가 여러 번 응시 → 각각 별도 로그로 저장
 중간 이탈해도 로그 저장 (결제 여부 무관)


관리자 페이지 조회 기능

전체 응시자 목록
필터: 날짜, 결제 여부, 완료/미완료
상세 보기: 문제별 정답/오답, 소요 시간
CSV 다운로드
7. 보안 및 부정행위 방지
요구사항

 IP 중복 응시 체크:

동일 IP에서 3회 이상 응시 시 경고 메시지
"다수의 접속이 확인되었습니다. 문제 유출 시 법적 책임이 있습니다."
 비정상 응시 패턴 차단:

1단계 평균 응답 시간 30초 미만 → 차단
정답률 20% 미만 → 차단
차단 시 메시지: "비정상적인 응시 패턴이 감지되었습니다. 문제를 충분히 읽고 신중히 응답해주세요."
 동의 조항 강화:

"문제 유출 또는 불법 공유 시 법적 조치"
"온라인 테스트는 공식 멘사 입회를 담보하지 않음"
체크박스 필수 동의
8. 결과 재확인 및 이메일 발송
요구사항

 비회원: 결제 직후 1회만 결과 확인 가능
 이후 재확인 불가 (사이트 내 조회 기능 없음)
 대신 이메일로 결과 발송:
기본 결과: 이메일 본문에 점수, 백분위, 발급번호, 진위확인 코드
상세 리포트: PDF 파일 첨부 (또는 다운로드 링크)



9. 표준편차 그래프 구현
요구사항

 정규분포 곡선 위에 사용자 위치 표시
 동적으로 위치 변경이 어려우면 이미지 10개 준비:
상위 1% 이하: bell-curve-top1.jpg
상위 2% 이하: bell-curve-top2.jpg
상위 5% 이하: bell-curve-top5.jpg
상위 10% 이하: bell-curve-top10.jpg
...
하위 50% 이상: bell-curve-below50.jpg

10. 결과 해석 멘트 개선
요구사항

 점수대별 5~10가지 멘트 준비
 GPT 활용해서 격려·희망적 톤으로 작성
멘트 예시

상위 10% 이내: "우수한 인재입니다. 멘사 공식 테스트 합격 가능성이 높습니다."
상위 20% 이내: "평균 이상의 능력을 보유하고 계십니다. 추가 학습으로 더욱 발전 가능합니다."
상위 50% 이내: "평균 수준입니다. 꾸준한 노력과 학습을 통해 향상될 수 있습니다."
하위 50%: "아직 발전 가능성이 많습니다. 충분한 휴식 후 재도전을 권장합니다."
11. 문의하기 시스템
기존 (v1)

로그인 후 문의 가능
변경 요구사항

 폼메일 방식으로 변경 (로그인 불필요)
 문의 양식 작성 → 관리자 이메일로 자동 전송
 관리자 페이지에서 수신 이메일 변경 가능
이유: 운영 담당자 변경 또는 외부 위탁 대비
문의 양식

이름
이메일
문의 유형 (선택: 테스트 관련 / 결제 문의 / 기타)
문의 내용 (textarea)
12. 결제 시스템
요구사항

 PG사: 이니시스
 별도 모듈로 개발 (간사가 거의 완성)
 결제 완료 후 결과 페이지 접근 권한 부여
결제 금액 (예시)

기본 결과: 5,000원
상세 리포트: 15,000원
차액 결제: 10,000원


위 내용을 바탕으로 프로토타입 v1을 개선하여 v2 만들어줘.

